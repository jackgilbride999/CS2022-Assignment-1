library IEEE;
use IEEE.STD_LOGIC_1164.ALL;
use IEEE.NUMERIC_STD.ALL;

entity memory_512_16bit is
    Port ( data_in : in STD_LOGIC_VECTOR (15 downto 0);
           address : in STD_LOGIC_VECTOR (15 downto 0);
           MW : in STD_LOGIC;
           data_out : out STD_LOGIC_VECTOR (15 downto 0));
end memory_512_16bit;

architecture Behavioral of memory_512_16bit is
constant delay: Time := 1 ns;
type mem_array is array(0 to 511) of STD_LOGIC_VECTOR(15 downto 0);
begin
memory_m: process(MW, address)
-- memory is initialised as blank, below shows sample instructions that can be loaded in
-- Opcodes; ADI : 2, LD : 3, ST : 4, INC : 5, NOT : 6, ADD : 7, Jump : 8, Branch Carry Set
-- ADI DR, SA, OP e.g. ADI R7, R7, #1 = 00000010 111 111 001
-- LD DR, SA e.g. LD R1, R2 = 00000011 001 010 000
-- ST DR, SA e.g. ST R1, R2 = 00000100 001 010 000
-- INC DR, SA e.g. INC R6, R7 = 00000101 110 111 000
-- NOT DR, SA e.g. NOT R5, R5 = 00000110 101 101 000
-- B ADL, SA, ADR e.g. B R0, #+63 = 00000111 111 000 111 as 2_111111 = 63
-- BCS ADL, SA, ADR e.g. BCS R0, #+7 = 00001000 000 000 111 as 2_000111 = 7
variable data_mem : mem_array :=(
        -- 0
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 1
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 2
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 3
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 4
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 5
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 6
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F  
        -- 7
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 8
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 9
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- A
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- B
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- C
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- D
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- E
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- F
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        
        -- 10
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 11
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 12
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 13
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 14
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 15
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 16
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F 
        -- 17
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 18
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
       -- 19
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 1A
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
       -- 1B
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 1C
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 1D
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
       -- 1E
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000", -- F
        -- 1F
        X"0000", -- 0
        X"0000", -- 1
        X"0000", -- 2
        X"0000", -- 3
        X"0000", -- 4
        X"0000", -- 5
        X"0000", -- 6
        X"0000", -- 7
        X"0000", -- 8
        X"0000", -- 9
        X"0000", -- A
        X"0000", -- B
        X"0000", -- C
        X"0000", -- D
        X"0000", -- E
        X"0000" -- F
        );
variable addr: integer;
begin
addr:=to_integer(unsigned(address(2 downto 0))); 
if MW='1' then
data_mem(addr):=data_in;
elsif MW='0' then
data_out <= data_mem(addr) after delay;
end if;
end process;
end Behavioral;
